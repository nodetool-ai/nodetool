## 2024-05-23 - Widespread Test Failures in UI Primitives
**Learning:** Many component tests (including `SelectionActionToolbar.test.tsx`) fail with `TypeError: Cannot read properties of undefined (reading 'forwardRef')` in `FlexColumn.tsx`. This appears to be a systemic issue with the test environment's handling of React imports in `ui_primitives`, possibly related to ESM/CJS interop in `ts-jest`.
**Action:** When working on UI components, rely more heavily on `make typecheck` and manual code verification if tests are failing due to this environment issue. Fix mocks for new code paths even if tests fail for other reasons, to ensure correctness when the environment is eventually fixed.
