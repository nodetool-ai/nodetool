const q=document.getElementById("log"),w=document.getElementById("boot-message"),s=document.getElementById("log-container"),d=document.getElementById("log-toggle"),x=document.getElementById("update-steps"),C=document.getElementById("open-log-file"),S={current:null},h={current:null},L={current:null},I={current:null};function M(e){function t(o){const n=document.createElement("p");n.className="log-line",n.textContent=o,e.appendChild(n),e.scrollTop=e.scrollHeight}return{log:t}}function P(){s.classList.toggle("expanded");const e=s.classList.contains("expanded");d.innerHTML=e?"<span>▼ Hide Log</span>":"<span>▲ Show Log</span>"}const E=M(q);function T(e){const t=new Date().getTime();window.location.href=`${e}?nocache=${t}`}function b(e,t,o,n){const c=document.getElementById("update-steps"),i=document.querySelector(".progress"),r=document.querySelector(".progress-percentage"),l=document.querySelector(".progress-eta"),a=document.querySelector(".action-label");if(!c||!i||!r||!a||!l){console.warn("Required elements not found");return}t<100&&(c.style.display="block"),i.style.width=`${t}%`,r.textContent=`${Math.round(t)}%`,a.textContent=`${o} ${e}`,l.textContent=n?` (${n})`:"",t===100&&setTimeout(()=>{c&&(c.style.display="none")},5e3)}function u(e){e&&(e.style.display="none")}function p(e,t="block"){e&&(e.style.display=t)}function v(){u(w)}function m(){p(w)}function $(){u(x)}function f(){u(document.getElementById("install-location-prompt"))}function U(){p(document.getElementById("install-location-prompt"))}function H(){p(document.getElementById("update-notification"))}function A(){s.classList.remove("expanded"),d.innerHTML="<span>▲ Show Log</span>"}function F(){s.classList.add("expanded"),d.innerHTML="<span>▼ Hide Log</span>"}function k(){window.api.getServerState().then(({isStarted:e,bootMsg:t,logs:o,initialURL:n})=>{if(console.log("Server state:",{isStarted:e,bootMsg:t,logs:o}),e)T(n),v(),$(),A(),z();else{const c=document.querySelector(".boot-text");c&&(c.textContent=t),D()}o.forEach(c=>E.log(c))})}window.api.onUpdateProgress(({componentName:e,progress:t,action:o,eta:n})=>{b(e,t,o,n)});window.api.onServerStarted(()=>{k()});window.api.onBootMessage(e=>{const t=document.querySelector(".boot-text");t&&(t.textContent=e),e.includes("Setting up Python")&&F()});window.api.onServerLog(e=>{E.log(e)});d.addEventListener("click",P);C.addEventListener("click",async()=>{await window.api.openLogFile()});k();window.api.onUpdateAvailable(e=>{const t=document.getElementById("update-notification"),o=document.getElementById("release-link");if(!t||!o){console.warn("Update notification elements not found");return}H(),o.href=e.releaseUrl,o.onclick=n=>{n.preventDefault(),window.api.openExternal(e.releaseUrl)}});function B(){return`#${Math.floor(Math.random()*100).toString(16).padStart(2,"0").repeat(3)}`}function g(){return`#${Math.floor(Math.random()*16777215).toString(16).padStart(6,"0")}`}function y(){const e=document.querySelector(".nodetool-icon");if(!e){console.warn("Icon element not found or invalid");return}e.style.setProperty("--stroke-color",B())}function N(){const e=document.querySelector(".nodetool-icon");if(!e){console.warn("Icon element not found or invalid");return}e.style.setProperty("--fill-color",B())}function z(){[S,h,L,I].forEach(e=>{e.current&&(clearInterval(e.current),e.current=null)})}function D(){y(),S.current=setInterval(y,5e3),setTimeout(()=>{h.current=setInterval(N,5e3)},62500),setTimeout(()=>{L.current=setInterval(()=>{const e=document.querySelector(".nodetool-icon");if(!e){console.warn("Icon element not found or invalid");return}e.style.setProperty("--stroke-color",g())},5e3)},5*6e4),setTimeout(()=>{I.current=setInterval(()=>{const e=document.querySelector(".nodetool-icon");if(!e){console.warn("Icon element not found or invalid");return}e.style.setProperty("--fill-color",g())},5e3)},10*6e4+2500)}window.api.onInstallLocationPrompt(async({defaultPath:e})=>{const t=document.querySelector(".location-path"),o=document.querySelector(".size-info");if(!t||!o){console.warn("Install location prompt elements not found");return}t.textContent=e,v(),U();const n=document.querySelector(".default-location"),c=document.querySelector(".custom-location"),i={ai:document.querySelector('input[name="ai-package"]'),dataScience:document.querySelector('input[name="data-science"]')};n&&c&&(n.addEventListener("click",async()=>{var l,a;const r={ai:((l=i.ai)==null?void 0:l.checked)||!1,dataScience:((a=i.dataScience)==null?void 0:a.checked)||!1};await window.api.selectDefaultInstallLocation(r),f(),m()}),c.addEventListener("click",async()=>{var l,a;const r={ai:((l=i.ai)==null?void 0:l.checked)||!1,dataScience:((a=i.dataScience)==null?void 0:a.checked)||!1};await window.api.selectCustomInstallLocation(r),f(),m()}))});
//# sourceMappingURL=main.js.map
