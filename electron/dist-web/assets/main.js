const C=document.getElementById("log"),w=document.getElementById("boot-message"),r=document.getElementById("log-container"),a=document.getElementById("log-toggle"),q=document.getElementById("update-steps"),k=document.getElementById("open-log-file"),I={current:null},L={current:null},S={current:null},h={current:null};function P(e){function t(n){const o=document.createElement("p");o.className="log-line",o.textContent=n,e.appendChild(o),e.scrollTop=e.scrollHeight}return{log:t}}function T(){r.classList.toggle("expanded");const e=r.classList.contains("expanded");a.innerHTML=e?"<span>▼ Hide Log</span>":"<span>▲ Show Log</span>"}const E=P(C);function M(e){const t=new Date().getTime();window.location.href=`${e}?nocache=${t}`}function $(e,t,n,o){const l=document.getElementById("update-steps"),c=document.querySelector(".progress"),i=document.querySelector(".progress-percentage"),u=document.querySelector(".progress-eta"),p=document.querySelector(".action-label");if(!l||!c||!i||!p||!u){console.warn("Required elements not found");return}t<100&&(l.style.display="block"),c.style.width=`${t}%`,i.textContent=`${Math.round(t)}%`,p.textContent=`${n} ${e}`,u.textContent=o?` (${o})`:"",t===100&&setTimeout(()=>{l&&(l.style.display="none")},5e3)}function s(e){e&&(e.style.display="none")}function d(e,t="block"){e&&(e.style.display=t)}function v(){s(w)}function m(){d(w)}function b(){s(q)}function f(){s(document.getElementById("install-location-prompt"))}function U(){d(document.getElementById("install-location-prompt"))}function H(){d(document.getElementById("update-notification"))}function z(){r.classList.remove("expanded"),a.innerHTML="<span>▲ Show Log</span>"}function A(){r.classList.add("expanded"),a.innerHTML="<span>▼ Hide Log</span>"}function B(){window.api.getServerState().then(({isStarted:e,bootMsg:t,logs:n,initialURL:o})=>{if(console.log("Server state:",{isStarted:e,bootMsg:t,logs:n}),e)M(o),v(),b(),z(),F();else{const l=document.querySelector(".boot-text");l&&(l.textContent=t),N()}n.forEach(l=>E.log(l))})}window.api.onUpdateProgress(({componentName:e,progress:t,action:n,eta:o})=>{$(e,t,n,o)});window.api.onServerStarted(()=>{B()});window.api.onBootMessage(e=>{const t=document.querySelector(".boot-text");t&&(t.textContent=e),e.includes("Setting up Python")&&A()});window.api.onServerLog(e=>{E.log(e)});a.addEventListener("click",T);k.addEventListener("click",async()=>{await window.api.openLogFile()});B();window.api.onUpdateAvailable(e=>{const t=document.getElementById("update-notification"),n=document.getElementById("release-link");if(!t||!n){console.warn("Update notification elements not found");return}H(),n.href=e.releaseUrl,n.onclick=o=>{o.preventDefault(),window.api.openExternal(e.releaseUrl)}});function x(){return`#${Math.floor(Math.random()*100).toString(16).padStart(2,"0").repeat(3)}`}function g(){return`#${Math.floor(Math.random()*16777215).toString(16).padStart(6,"0")}`}function y(){const e=document.querySelector(".nodetool-icon");if(!e){console.warn("Icon element not found or invalid");return}e.style.setProperty("--stroke-color",x())}function D(){const e=document.querySelector(".nodetool-icon");if(!e){console.warn("Icon element not found or invalid");return}e.style.setProperty("--fill-color",x())}function F(){[I,L,S,h].forEach(e=>{e.current&&(clearInterval(e.current),e.current=null)})}function N(){y(),I.current=setInterval(y,5e3),setTimeout(()=>{L.current=setInterval(D,5e3)},62500),setTimeout(()=>{S.current=setInterval(()=>{const e=document.querySelector(".nodetool-icon");if(!e){console.warn("Icon element not found or invalid");return}e.style.setProperty("--stroke-color",g())},5e3)},5*6e4),setTimeout(()=>{h.current=setInterval(()=>{const e=document.querySelector(".nodetool-icon");if(!e){console.warn("Icon element not found or invalid");return}e.style.setProperty("--fill-color",g())},5e3)},10*6e4+2500)}window.api.onInstallLocationPrompt(async({defaultPath:e,downloadSize:t,installedSize:n})=>{const o=document.querySelector(".location-path"),l=document.querySelector(".size-info");if(!o||!l){console.warn("Install location prompt elements not found");return}o.textContent=e,l.textContent=`Download size: ${t}, Installed size: ${n}`,v(),U();const c=document.querySelector(".default-location"),i=document.querySelector(".custom-location");c&&i&&(c.addEventListener("click",async()=>{await window.api.selectDefaultInstallLocation(),f(),m()}),i.addEventListener("click",async()=>{await window.api.selectCustomInstallLocation(),f(),m()}))});
//# sourceMappingURL=main.js.map
