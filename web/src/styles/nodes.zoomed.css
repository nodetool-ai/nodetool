/* NODE ZOOMED-OUT STYLES */

/* --------------------------------------------- */
/* Zoomed-out container and simplifications       */
/* --------------------------------------------- */
.react-flow.zoomed-out .react-flow__node {
  background-color: var(--palette-grey-800);
  min-width: 100px;
}

/* Simplify glass nodes for readability and perf */
.react-flow.zoomed-out .react-flow__node .node-body {
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
  box-shadow: none !important;
  opacity: 0.85; /* prefer opacity over darker fill */
}

/* Tighten header and hide decorative icon */
.react-flow.zoomed-out .react-flow__node .node-header {
  min-height: 18px !important;
  padding: 0 4px !important;
  opacity: 0.9;
}
.react-flow.zoomed-out .react-flow__node .node-header .icon-container {
  display: none !important;
}
.react-flow.zoomed-out .react-flow__node .node-header .node-title {
  font-size: var(--fontSizeTinyer) !important;
  color: var(--palette-grey-200) !important;
  padding: 0.4em 0 0.4em 0.4em !important;
  max-width: 140px !important;
}

/* Lighten node outline a touch */
.react-flow.zoomed-out .react-flow__node:not(.selected) {
  outline-color: var(--c_node_header_bg) !important; /* fallback */
  outline-color: color-mix(
    in srgb,
    var(--c_node_header_bg) 82%,
    var(--palette-primary-main) 18%
  ) !important;
}

.react-flow.zoomed-out
  .react-flow__node:has(.node-header.has-parent):not(.selected) {
  outline-color: var(--c_node_header_bg_group) !important; /* fallback */
  outline-color: color-mix(
    in srgb,
    var(--c_node_header_bg_group) 82%,
    var(--palette-primary-main) 18%
  ) !important;
}

/* Apply same opacity simplification to PreviewNode root */
.react-flow.zoomed-out .react-flow__node .preview-node {
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
  box-shadow: none !important;
  opacity: 0.85;
}

/* Hide lower-priority UI at zoom */
.react-flow.zoomed-out .node-property:not(.image),
.react-flow.zoomed-out .node-property .property-label,
.react-flow.zoomed-out .audio-controls-container,
.react-flow.zoomed-out .multi-outputs,
.react-flow.zoomed-out .node-title,
.react-flow.zoomed-out .node-header span,
.react-flow.zoomed-out .node-header .menu-button,
.react-flow.zoomed-out .node-footer,
.react-flow.zoomed-out .node-status,
.react-flow.zoomed-out .api-key-button,
.react-flow.zoomed-out .title-container,
.react-flow.zoomed-out .process-timer,
.react-flow.zoomed-out .comment-node > div,
.react-flow.zoomed-out .node-property-form,
.react-flow.zoomed-out .react-flow__handle,
.react-flow.zoomed-out .loop-node .inputs,
.react-flow.zoomed-out .loop-node .outputs,
.react-flow.zoomed-out .model-button,
.react-flow.zoomed-out .expand-button-container,
.react-flow.zoomed-out .tool-call-container,
.react-flow.zoomed-out .node-chunk,
.react-flow.zoomed-out .drop-container,
.react-flow.zoomed-out .preview-node-content .output {
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  transition: opacity 0.3s ease-out, visibility 0.3s ease-out;
}

.react-flow.zoomed-out .node-property .image-property,
.react-flow.zoomed-out .image-output {
  opacity: 1;
  visibility: visible;
}

/* Resize handle size at zoom */
.react-flow.zoomed-out .node-resize-handle,
.react-flow.zoomed-out .node-resize-handle svg {
  width: 60px !important;
  height: 60px !important;
  bottom: -10px;
  right: -10px;
}

/* Selected node shadow at zoom */
.react-flow.zoomed-out .react-flow__node.selected {
  box-shadow: 0 0 0 6px var(--node-primary-color, var(--palette-text-primary)),
    0.1em 0.1em 8px 0px rgba(0, 0, 0, 0.6) !important;
}
