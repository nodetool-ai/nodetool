/* NODE STATE STYLES (selection, hover, loading) */

/* --------------------------------------------- */
/* Selection and highlighting                     */
/* --------------------------------------------- */
.react-flow__node.selected {
  outline-color: var(
    --node-primary-color,
    var(--palette-text-primary)
  ) !important;
  /* box-shadow: 0 0 0 1px var(--node-primary-color, var(--palette-text-primary)),
    0 10px 30px rgba(0, 0, 0, 0.2); */
}

.react-flow__node:not(.selected) {
  /* Match outline to header background color */
  outline: 1px solid var(--c_node_header_bg) !important;
  /* outline: none; */
  box-shadow: none;
  /* Increase brightness and add slight saturation toward primary */
  /* outline-color: color-mix(
    in srgb,
    var(--c_node_header_bg) 82%,
    var(--palette-primary-main) 18%
  ) !important; */
  /* outline-offset: 1px; */
}

/* Grouped nodes: use group header color for outline */
.react-flow__node:has(.node-header.has-parent):not(.selected) {
  outline-color: var(--c_node_header_bg_group) !important; /* fallback */
  outline-color: color-mix(
    in srgb,
    var(--c_node_header_bg_group) 82%,
    var(--palette-primary-main) 18%
  ) !important;
}

.react-flow__node:hover:not(.selected) {
  outline: 2px solid var(--c_node_header_bg) !important;
  outline-color: color-mix(
    in srgb,
    var(--c_node_header_bg) 82%,
    var(--palette-primary-main) 18%
  ) !important;
  outline-offset: 1px;
}

/* Hover for grouped nodes keeps group header color */
.react-flow__node:has(.node-header.has-parent):hover:not(.selected) {
  outline: 1px solid var(--c_node_header_bg_group) !important;
  outline-color: color-mix(
    in srgb,
    var(--c_node_header_bg_group) 82%,
    var(--palette-primary-main) 18%
  ) !important;
}

/* --------------------------------------------- */
/* Loading states                                  */
/* --------------------------------------------- */
.react-flow .selected .process-timer {
  color: var(--palette-grey-1000);
  background-color: transparent;
}

/* Loading styles are handled by Emotion in BaseNode.tsx
   The animation uses dynamic colors from node metadata and requires
   mask properties for the ring effect that are better expressed in JS */
