# Changelog

All notable changes to this project will be documented in this file.

This log is generated by Claude using [a script](scripts/changelog.py).

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased] - 2025-12-20

### Added

#### UI/Frontend
- Counter display on workflow edges for tracking data flow
- State persistence to panel stores for improved UX
- Chat toolbar with enhanced visual styling
- Agent execution UI with improved task tracking and tool call visibility
- Audio player for markdown links in chat interface
- Dismissible connection alerts
- Model pack UI for bundled model downloads
- Calendar event view in UI
- Native clipboard support for image copying
- Image copy buttons throughout UI
- Log viewer improvements
- Automatic input and output node naming
- Model text editor with improved styling
- Version conversion to PEP 440 format
- Enhanced search functionality with debounce timing
- Test documentation for AI coding assistants
- Comprehensive README sections and examples

#### Documentation
- Comprehensive agent system documentation (AGENTS.md files)
- HuggingFace integration documentation
- CUDA installation instructions and readme

#### nodetool-base Nodes
- DataframeInput node for data processing workflows
- ToString text node for type conversion
- Text processing nodes for comparison, transformation, and normalization
- Agent thread node for conversation management
- Research agent DSL example
- Text-to-video campaign DSL example
- Game encounter planner DSL example
- Supabase DSL examples and CRUD node implementations
- ImageToVideo node for video generation from images
- TextToVideo node for generating videos from text prompts
- ResearchAgent node for autonomous web-based research and synthesis
- StructuredOutputGenerator for generating structured JSON objects
- Document and Excel processing nodes
- New audio, data, image, text, and video nodes for enhanced processing capabilities

#### nodetool-huggingface Nodes
- Nunchaku model packs for optimized inference
- Sentence transformers support
- FLUX models for image processing
- IP Adapter support for Stable Diffusion
- ControlNet models for SDXL
- Qwen Image models for vision tasks
- Text-to-video functionality
- GGUF model support
- Enhanced HuggingFace pipeline caching mechanism

### Changed

#### UI/Frontend
- Renamed agent SubTasks to Steps with comprehensive documentation updates
- Enhanced chat drag-and-drop to support assets
- Standardized WebSocket URLs with `/ws/` prefix
- Updated API schema for model packs
- Removed tool call result display for cleaner UI
- Improved dynamic property handling in nodes
- Streamlined property styling across components
- Refactored README sections for clarity
- Updated project title to "Local-First AI Workflow Builder"
- Extended Electron API interface
- Allowed external Ollama/llama.cpp installations
- Refactored logger file writing
- Improved UI tool calling display
- Enhanced model backend selection during installation
- Enabled pip prerelease installations
- Refined Electron test mocks
- Improved workflow settings styling
- Enhanced node search performance
- Optimized React rendering with strategic memoization
- Redesigned "New Workflow" and "New Chat" buttons
- Introduced custom tooltip styles
- Refined search input and Asset Explorer layouts
- Enhanced error handling in ModelListIndex and LlamaModelSelect
- Improved model download error handling and status tracking
- Refactored SecretsMenu wording for better UX
- Updated canvas and panel colors for improved aesthetics
- Enhanced search results computation

#### nodetool-core
- Standardized image handling to base64 for all providers
- Enhanced logging system with integrated display manager
- Improved execution tracking with structured events
- Refactored agent system for Step-based execution
- Simplified TaskPlanner to single-phase planning
- Updated Anthropic SDK to >=0.75.0
- Changed default port to 7777
- Streamlined HuggingFace model discovery
- Enhanced SQLiteConnectionPool to support multiple event loops
- Improved execution infrastructure

#### nodetool-base
- Enhanced Gemini audio voice options with new names
- Updated agent configurations and model definitions
- Enhanced provider retrieval in Agent class
- Streamlined imports and enhanced node processing
- Enhanced OCR result processing
- Updated metadata across multiple nodes
- Removed sentence_transformers dependency
- Updated Playwright to run without Docker

#### nodetool-huggingface
- Refactored HuggingFace pipeline loading and caching
- Switched to asynchronous Hugging Face caching (HF_FAST_CACHE)
- Implemented async cache resolution with cache key support
- Enhanced Nunchaku integration across multiple nodes
- Optimized pipelines for better performance
- Enhanced HuggingFaceLocalProvider with MPS device support
- Refactored model loading with improved logging
- Updated Flux model defaults
- Optimized dtype handling (automatic BF16 with fallback)
- Refactored CUDA availability checks
- Enhanced dependencies for improved compatibility

### Fixed

#### UI/Frontend
- Duplicate assistant message after streaming
- Templates scrolling issues
- Line height for multiline input styles
- Model download with allow patterns
- Electron build without code signing
- Download ID handling in ModelListItem component
- Path and version issues in release workflow
- Failing test assertions in web and electron test suites
- DictTable editing functionality
- Number input styling
- Tab separator height in TabsNodeEditor
- Download model functionality
- Various palette and color issues
- Backdrop rendering
- Import errors and linting issues
- Toolbar z-index conflicts
- Node search functionality
- Mini app inputs

#### nodetool-core
- Safe MLX import with consistent error handling
- Robust offline cache and patchable downloads for HuggingFace
- ModelManager.set_model legacy signature restoration
- Normalized decrypt failures in security module
- Stabilized agent execution and tool schemas
- Property schema and assignment backward compatibility
- ChromaDB collection handling issues
- Job execution problems
- API fixes (collection, file, job, admin, storage)
- Import-time crash with aiodns (pinned pycares version)
- Ollama model retrieval with specific connection error messages

#### nodetool-base
- Extract text from PDF functionality
- Import errors and linting issues
- Test and default values
- Forgiving join operations

#### nodetool-huggingface
- RealESRGAN functionality
- Nunchaku imports on macOS
- Device handling in Nunchaku transformer
- Caching issues
- Qwen Image model compatibility
- Flux model configuration
- SDXL ControlNet implementation
- Playground support in XL nodes
- Object detection visualization (plt.tight_layout typo)

### Removed

#### nodetool-core
- StepExecutor deprecated SubTaskContext implementation
- CoT agent implementation (replaced with Step-based system)
- Deprecated example files

#### nodetool-base
- RealtimeWhisper node (replaced with improved implementation)
- Unused environment variable nodes
- Simple Chat example files
- HuggingFace inference node implementations (moved to dedicated package)
- Leann node classes and related dependencies

#### nodetool-huggingface
- IP adapter feature (temporarily removed)
- BitsAndBytes dependency for non-Darwin platforms
- MLX dependencies (mlx_lm, mlx_vlm)
- Obsolete "Image To Audio Story" example
- Deprecated Hugging Face models from LORA and SDXL lists

### Security

- Updated Windows release process with code signing
- Enhanced Azure code signing for improved security

## [November 2025]

### Added

#### UI/Frontend
- Mini apps to dashboard
- Documentation to main menu
- CUDA installation instructions and readme

#### nodetool-core
- Model cache for disk-based caching of model metadata
- CLI command to list all cached HuggingFace models
- New HuggingFace model patterns and matchers
- Support for Flux and Qwen image types

#### nodetool-base
- Supabase integration enhancements
- Document processing improvements

#### nodetool-huggingface
- Enhanced Nunchaku integration
- Model reachability checking scripts

### Changed

#### UI/Frontend
- Search debounce timing for better performance
- Model download store to handle missing download entries
- Electron builder version upgrade
- Package lock updates

#### nodetool-core
- HuggingFace model search functionality refactored
- ModelManager iteration improvements
- Hosted Docker image usage

#### nodetool-huggingface
- Optimized imports and pipeline handling
- Enhanced device support (MPS, CUDA)

### Fixed

#### UI/Frontend
- Publisher name in releases
- Electron builder version compatibility
- Model download status tracking
- Floating toolbar visibility when model manager is open

#### nodetool-core
- Unreferenced variable issues
- Model loading edge cases

## [October 2025]

### Added

#### UI/Frontend
- Background agents support
- External Ollama support

#### nodetool-core
- Graph planner pattern examples
- Debugging reproduction scripts

#### nodetool-base
- New example workflows
- SQLite node enhancements

#### nodetool-huggingface
- FLUX models and IP Adapter support
- ControlNet models for SDXL
- Text-to-video functionality

### Changed

#### UI/Frontend
- Optimized hot paths with reduced algorithmic complexity

#### nodetool-core
- Example workflows updated for new patterns
- Documentation improvements

#### nodetool-base
- Testing configuration updates

#### nodetool-huggingface
- Enhanced provider with GGUF model support
- Unified provider interface implementation

### Fixed

- Various UI and functionality fixes across all packages

## [September 2025]

### Added

#### UI/Frontend
- Job reconnection for improved workflow state management
- Model download status tracking
- Infinite scrolling for model lists
- Fullscreen support for preview and markdown rendering
- Draggable scrolling in output renderer

#### nodetool-core
- Background job system with async handling and backpressure
- MLX provider with audio and vision model support
- Allow missing properties option for node validation
- Custom serializer for default values in Property model
- Docker-based code runners for multiple languages
- NodeInstanceTool for dynamic output handling

#### nodetool-base
- StructuredOutputGenerator for JSON objects
- Pattern matching functionality for image and input nodes
- Agent classes with image and audio support
- Streaming output support for multiple nodes
- ExecuteLua node for Lua code execution
- SaveTextFile node for file operations
- DataGenerator with streaming support

#### nodetool-huggingface
- Asynchronous pipeline execution across all nodes
- Kokoro TTS model implementation
- Multiple new model integrations

### Changed

#### UI/Frontend
- Switched installer to micromamba
- Enhanced Electron build configuration
- Refactored WebsocketRunner for real-time communication
- Improved model filtering and sorting
- Enhanced chat composer and input sections

#### nodetool-core
- Refactored to use TypedDict for output types
- Enhanced tool selection and UI proxy integration
- Improved async handling across API modules
- Migrated to async Chroma client
- Moved modules from common/ into domain packages
- Enhanced provider support and message handling

#### nodetool-base
- Refactored Agent class for improved output handling
- Updated to use ClassVar for tool exposure flags
- Enhanced node execution with execution mode support
- Refactored code nodes to remove dynamic outputs

#### nodetool-huggingface
- Standardized logging across all nodes
- Refactored model loading for async operations
- Improved type handling and dependency management

### Fixed

#### UI/Frontend
- Model download handling
- Package installation commands
- Various UI component issues

#### nodetool-core
- Memory URI cache thread-safety
- Node loading error handling
- Windows compatibility issues
- Async event loop on Windows

#### nodetool-base
- Test coverage and async operations
- File handling in various nodes

### Removed

#### nodetool-base
- Deprecated MLX and WhisperCpp nodes
- Redundant ListIterator node

## [May-August 2025]

### Added

#### UI/Frontend
- Connection guard hooks for connectivity management
- BASE_URL module for improved API client configuration
- Frontend tools for enhanced node management
- Search functionality across multiple components
- Sync mode selection in NodeHeader
- PCM16 audio streaming support
- Logging and notification system
- Edge animations
- Dynamic input property support
- Reroute node for workflow flexibility
- Monaco Editor integration
- Mobile responsive views

#### nodetool-core
- Help system consolidation with search guidelines
- Debug API endpoint for exporting bundles
- Cooperative shutdown features
- Graceful WebSocket shutdown
- Enhanced tool message processing
- OpenAI-compatible message formatting
- Llama.cpp support with server manager
- Verbose logging option for CLI
- HTTP default headers and timeout
- Persistent event loop for WebSocket

#### nodetool-base
- Calendly API integration nodes
- Collection node
- Evaluate Expression and Execute Python nodes
- Multiple Python standard library node wrappers (textwrap, random, zlib, hashlib, base64, ftplib, urllib, gzip, tarfile, difflib, HTML)
- SendEmail node
- Meeting Transcript Summarizer workflow
- Daily Digest workflow
- Enhanced agent descriptions

#### nodetool-huggingface
- OmniGen model support
- CogVideoX for text-to-video
- Perturbed-Attention Guidance (PAG) pipelines
- Image-to-text models
- AutoPipeline for image-to-image and inpainting
- SAM2 package integration
- Depth estimation capabilities
- Multiple new model variants

### Changed

#### UI/Frontend
- Renamed examples to templates
- Enhanced workflow management and API integration
- Improved output renderer with structured string display
- Refactored tabs and panel components
- Enhanced asset viewer and text editor
- Streamlined package management in Electron

#### nodetool-core
- Migrated from Poetry to Hatch for package management
- Transitioned to uv for dependency management
- Enhanced schema migration handling
- Improved workflow execution with pagination
- Refactored FastAPI lifecycle management
- Enhanced async file storage operations
- Improved provider model type handling

#### nodetool-base
- Transitioned from Poetry to uv for dependencies
- Refactored evaluation agents
- Enhanced math operation descriptions
- Updated agent configurations
- Improved asset loading consistency

#### nodetool-huggingface
- Switched from Poetry to Hatchling build system
- Refactored model loading parameters for torch_dtype
- Enhanced image generation with PAG parameters
- Improved import organization
- Updated dependency versions (diffusers, transformers)

### Fixed

#### UI/Frontend
- Various test failures and type errors
- AssetViewer navigation and downloading
- Workflow dirty state management
- Connection handling issues

#### nodetool-core
- Font file handling in ProcessingContext
- Asset query sanitization
- WorkflowRunner edge validation
- Global search for assets with underscores
- Agent tool error handling
- Windows file path handling

#### nodetool-base
- Multiple test case improvements
- Date processing to use UTC
- ChatInput test expectations
- Browser environment variable handling

#### nodetool-huggingface
- ControlNet for Apple MPS
- Style transfer examples
- Audio examples
- Import problems

## [January 2025]

### Added

#### UI/Frontend
- Workflow tabs for better organization
- Tag filtering for workflow lists
- Thumbnail URLs and tags for workflows
- Framer Motion for animated notifications
- Search functionality across multiple components (model recommendations, workflows, examples)
- PDF extraction nodes using pdfplumber and PyMuPDF
- Document and DocumentOutput nodes
- PDF viewer with zoom functionality
- EnumInput class for enumeration parameter selection
- Web support for running workflows as apps
- Mini apps with Chakra UI and chat interface
- Audio, video, and document input components for apps
- Workflow deletion functionality
- "Run as App" functionality in AppHeader
- Workflow selection component
- Expandable thought tag rendering in chat
- Welcome screen for local mode
- Connectable nodes search functionality

#### nodetool-core
- Streaming chat response for help endpoint
- Production node security and metadata filtering
- JSON schema support for agents
- Float data type support in JSON schema
- Ollama embeddings support
- Collection indexing with parallel processing and semantic splitting

#### nodetool-base
- SKLearn nodes for data processing and machine learning workflows
- Jinja templating support for MapTemplate nodes
- LangChain and LlamaIndex text splitting nodes
- Gmail label functionality for email processing
- Deepseek model recommendations
- FAL AI integration nodes (LLM, text-to-audio, video models)
- Elevenlabs integration
- Ollama embedding function with configurable timeout
- PDF extraction capabilities

#### Example Workflows
- Daily Digest using Deepseek R1 model
- Simple RAG workflow
- Audio to Spectrogram
- Style Transfer
- Transcribe Audio
- Image Chat
- Simple Chat
- Categorize Mails
- Movie Posters
- Paper2Podcast
- RSS Images
- Summarize RSS

### Changed

#### UI/Frontend
- Refactored NodeMenu UI with collapsible panels
- Improved namespace filtering and node selection
- Enhanced tooltip styling and timing for faster responsiveness
- Migrated node header and footer styles from CSS-in-JS to CSS
- Improved PropertyInput and PropertyLabel styling
- Optimized React component rendering with memoization (StaticNodeMenu, BaseNode, HelpChat, WorkflowChat)
- Enhanced file drop handler and asset management
- Improved workflow loading and editing behavior
- Refactored panel components for better layout
- Enhanced collection management UI
- Improved NodeMenu search behavior and performance
- Better dynamic property handling
- Streamlined input and output node handling
- Enhanced media handling in chat interface
- Faster workflow loading with optimized loaders
- Improved server startup error handling

#### nodetool-core
- Refactored text handling to remove TextRef type
- Enhanced index endpoint with editor redirect
- Improved Electron app functionality
- Updated model recommendations across workflows

#### nodetool-base
- Moved file nodes to nodetool namespace (removed lib.file)
- Moved image processing nodes from lib.image.pillow to nodetool.image
- Refactored Chroma and SKLearn dataset nodes
- Updated agent configurations
- Enhanced Collection indexing with semantic splitting

#### Package Management
- Added statsmodels support
- Updated dependencies and lock files
- Added Ollama embeddings to requirements

### Fixed

#### UI/Frontend
- Dragging from NodeMenu
- Workflow imports and type errors
- Asset viewer and explorer UI layout responsiveness
- NodeFooter visibility for constant nodes
- Handle tooltips positioning with FloatingUI
- Arrow keys in node search
- Connectable cache issues
- File extension extraction in storage API
- Performance issues with edge handlers and node dragging
- Context menu in group nodes
- Panel size saving
- Enum field connectivity and handles
- NodeMenu overflow and positioning
- Search highlighting in various components
- Tab navigation and panel state

#### nodetool-core
- Font path resolution in tests
- Collection creation with proper buffer settings
- Server health checks via HTTP

#### nodetool-base
- Test coverage improvements
- Image transform module imports

### Removed

#### UI/Frontend
- PermissionsPolicyMiddleware from server
- QuestionAnswerAgent
- Text splitting nodes (replaced with LangChain/LlamaIndex)
- Unused debug statements
- Framer Motion dependency

#### nodetool-base
- IndexRequest functionality
- Redundant file path modules

## [October-December 2024]

### Added

#### Initial Platform Development
- Core workflow engine foundation
- Node-based visual programming interface
- Basic UI components and layouts

#### Infrastructure
- Electron desktop application setup
- Package management system
- Development tooling and build process

### Changed

- Initial architecture decisions
- Core technology stack setup

### Fixed

- Early development bugs and issues

## [February-April 2025]

### Added

#### UI/Frontend
- Initial UI framework and components
- Workflow visualization
- Node editor capabilities

#### nodetool-core
- Core API infrastructure
- Database adapters (SQLite, PostgreSQL, Supabase)
- WebSocket support
- Initial provider integrations

#### nodetool-base
- Foundation node library
- Core processing nodes
- Initial examples

#### nodetool-huggingface
- Package initialization
- PaddleOCR dependencies
- Stable Diffusion scheduler
- Poetry configuration

### Changed

#### nodetool-core
- Dependency management improvements
- Model manager import paths

#### nodetool-huggingface
- Refactored imports from providers to nodes directory
- Updated Poetry lock and dependencies

### Removed

#### nodetool-huggingface
- Legacy dependency management files

## [September 2024]

### Added

#### UI/Frontend
- Enhanced agent framework with comprehensive tooling
- Package management infrastructure

#### nodetool-core
- Initial agent framework infrastructure
- Task planning and execution system

#### nodetool-base
- Initial comprehensive node library
- Audio, video, image, and text processing nodes

#### nodetool-huggingface
- Initial HuggingFace integration
- Pipeline-based node architecture

### Changed

#### UI/Frontend
- Improved workflow management architecture
- Enhanced UI components across the board

#### nodetool-core
- Core architecture enhancements for agent support

#### nodetool-base
- Core node architecture improvements

#### nodetool-huggingface
- Refactored for async pipeline execution

## [0.6.0]

### Added

- Agent framework and Agent nodes for all LLM providers
- Comprehensive Tool suite for agent system
- Brightdata integration
- Package management UI and API endpoints
- Node viewer component
- Workflow tabs for better organization
- Chat overlay window for improved accessibility
- Comprehensive test suites for DSL operations across multiple domains
- Cross-platform clipboard and notification nodes
- Apple Calendar nodes for event management
- macOS Dictionary Search node
- Workflow global shortcuts in Electron app
- SKLearn nodes for data processing and machine learning workflows
- Jinja templating support for MapTemplate nodes
- Gemini support for AI models
- PDF extraction nodes using pdfplumber and PyMuPDF
- Comprehensive module-level documentation for common modules
- Apple Speech node with advanced text-to-speech features

### Changed

- Refactored Electron app architecture for improved workflow management
- Enhanced media handling in chat interface
- Improved dynamic property handling
- Updated Ollama integration with structured output
- Refactored ComfyUI classes for better organization
- Enhanced RunPod WebSocket integration
- Improved error handling and notifications system
- Upgraded dependencies and package management
- Refactored workflow loading and editing behavior
- Enhanced UI styling and layout for improved user experience
- Improved node connection and edge handling
- Updated README with comprehensive project overview and use cases

### Fixed

- Improved performance of edge handlers and node dragging
- Fixed scrolling issues in various components
- Resolved conflicts with keyboard shortcuts and navigation
- Addressed issues with file paths on Windows
- Fixed asset deselection and navigation
- Corrected audio permissions handling in Electron

## [0.5.6]

### Added

- Azure code signing for improved security
- Proxy chat requests to worker in production environment
- VRAM saving options for Stable Diffusion
- More SD models and improved downloader
- Versioned requirements for better dependency management
- Persistence for workflow and workflow grid performance
- Randomize list node
- Node caching using memcached
- Plausible analytics integration
- Welcome menu on NodeTool icon
- Cancel workflows functionality
- Movie poster example
- Last workflow and workflow dirty indicators in AppHeader

### Changed

- Improved model downloads and Python requirements check
- Enhanced error handling in Electron
- Refactored and optimized various components (BaseNode, NodeMenu, etc.)
- Updated ComfyUI integration
- Improved asset handling and folder structure
- Enhanced workflow runner and job management
- Refined UI/UX for various components (AppHeader, Settings, etc.)
- Upgraded to React Query
- Improved documentation and examples

### Fixed

- Various fixes for Electron configuration and build
- Resolved issues with SD models and checkpoints
- Fixed broken image fields and node connections
- Corrected handling of empty inputs
- Addressed type errors and validation issues
- Fixed pasting of nodes from other tabs

## [0.5.6]

(Content unchanged)

## [0.3.1] - 2024-08-29

### Added

- Electron build process for desktop application
- New screenshot showcasing updated UI

### Changed

- Updated miniconda action in build process

### Fixed

- Various fixes for Electron configuration and build

## [0.3.0] - 2024-07-18

### Added

- Run Ollama in Docker setup

### Changed

- Improved state handling for model management

### Fixed

- Various UI and functionality fixes

## [0.2.9] - 2024-07-11

### Added

- API demo and token settings
- Direct upload for temporary assets

### Changed

- Improved asset handling and storage

### Fixed

- Various fixes for API and storage interactions

## [0.2.8] - 2024-07-09

### Added

- Text asset uploads
- New screenshot in documentation

### Changed

- Improved image/video drop functionality
- Enhanced ComfyUI integration

### Fixed

- Various UI and functionality fixes

## [0.2.7] - 2024-06-30

### Added

- Ollama worker integration

### Changed

- Improved workflow runner

### Fixed

- Various bug fixes and improvements

## [0.2.6] - 2024-06-29

### Fixed

- Claude tool use functionality

## [0.2.5] - 2024-06-29

### Added

- Ollama support for function calling backend

### Changed

- Improved agent workflows and tools

## [0.2.3] - 2024-06-29

### Added

- More tools for agents

### Changed

- Refactored modules for better organization

## [0.2.2] - 2024-06-17

### Added

- Plausible analytics integration

### Changed

- Improved logging and error handling

### Fixed

- Various UI and functionality fixes

## [0.2.1] - 2024-06-16

### Added

- Model status checking and warning system
- Improved job cancellation

### Changed

- Enhanced login redirect process
- Improved capability management

### Fixed

- Various bug fixes and improvements

## [0.2.0] - 2024-06-16

### Added

- New API for messages and tasks
- Improved handling of empty inputs

### Changed

- Enhanced workflow running process

### Fixed

- Various bug fixes and improvements
